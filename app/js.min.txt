/*! custanet 2014-06-01 */
!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(d){if(c&&(b(d,"mouseup"),b(d,"mouseout"),this._touchMoved||b(d,"click"),c=!1,a(d.target).hasClass("custanet-tbFore"))){var e=a(d.target).val();setTimeout(function(){a(d.target).val("").focus().val(e)},0)}},d._mouseInit=function(){var b=this;b.element.on("touchstart",a.proxy(b,"_touchStart")).on("touchmove",a.proxy(b,"_touchMove")).on("touchend",a.proxy(b,"_touchEnd")),e.call(b)}}}(jQuery);var debugmsg,friends,groups,$c=jQuery.noConflict();$c(function(){function hookXhr(){var a=function(){this.readyState=0,this.responseText="",this.status="",this.onreadstatechange=void 0;var a=new XDomainRequest;return a.onprogress=function(){var a;this.xhr.readyState=2,this.xhr&&(a=this.xhr.onreadystatechange)&&a.apply(this.xhr)},a.onload=function(){var b;this.xhr.readyState=3,this.xhr&&(b=this.xhr.onreadystatechange)&&b.apply(this.xhr),this.xhr.responseText=a.responseText,this.xhr.readyState=4,this.xhr.status="200",b&&b.apply(this.xhr)},this.open=function(b,c,d){return a.open(b,c,d)},this.send=function(b){a.send(b)},this.setRequestHeader=function(){},this.getResponseHeader=function(b){return b.match(/^Content\-Type$c/i)?a.contentType:""},a.xhr=this,this};return new a}function update_font(a){load_css(a)}function load_css(a){fonts[a].loaded||(fonts[a].loaded=!0,""!=fonts[a].url&&$c("head").append('<link href="'+fonts[a].url+'" rel="stylesheet" type="text/css">'))}function cssUpdate(a,b,c){var d,e="";"font-family"==c&&load_css(b[c]);var f=window.navigator.appVersion.toLowerCase();a.currentcss[c]=b[c],"color"==c?f.indexOf("msie 6.0")>-1||f.indexOf("msie 7.0")>-1||f.indexOf("msie 8.0")>-1?a.para.children("textarea.custanet-tbFore").css(c,$c("#custanet-color").attr("value")+e):(d=hexUnpack(b[c]),d="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+b["font-opacity"]/100+")",a.para.children("textarea.custanet-tbFore").css(c,d+e)):"font-size"==c?a.para.children("textarea.custanet-tbFore").css(c,b[c]):"font-opacity"==c?f.indexOf("msie 6.0")>-1||f.indexOf("msie 7.0")>-1||f.indexOf("msie 8.0")>-1||(d=hexUnpack(a.currentcss.color),d="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+b["font-opacity"]/100+")",a.para.children("textarea.custanet-tbFore").css("color",d+e)):"text-shadow-positonx"==c||"text-shadow-positony"==c||"text-shadow-blur"==c||"text-shadow"==c?(d=a.currentcss["text-shadow"],d=d+" "+b["text-shadow-positonx"]+" "+b["text-shadow-positony"]+" "+b["text-shadow-blur"],a.para.children("textarea.custanet-tbFore").css("text-shadow",d+e)):"background-color"==c?f.indexOf("msie 6.0")>-1||f.indexOf("msie 7.0")>-1||f.indexOf("msie 8.0")>-1||(d=hexUnpack($c("#custanet-background-color").attr("value")),d="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+b["background-opacity"]/100+")",a.para.children("textarea.custanet-tbFore").css("background-color",d+e)):"background-opacity"==c?f.indexOf("msie 6.0")>-1||f.indexOf("msie 7.0")>-1||f.indexOf("msie 8.0")>-1||(d=hexUnpack(a.currentcss["background-color"]),d="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+b["background-opacity"]/100+")",a.para.children("textarea.custanet-tbFore").css("background-color",d+e)):"border-color"==c?f.indexOf("msie 6.0")>-1||f.indexOf("msie 7.0")>-1||f.indexOf("msie 8.0")>-1||(d=hexUnpack($c("#custanet-border-color").attr("value")),d="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+b["border-opacity"]/100+")",a.para.children("textarea.custanet-tbFore").css("border-color",d+e)):"border-opacity"==c?f.indexOf("msie 6.0")>-1||f.indexOf("msie 7.0")>-1||f.indexOf("msie 8.0")>-1||(d=hexUnpack(a.currentcss["border-color"]),d="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+b["border-opacity"]/100+")",a.para.children("textarea.custanet-tbFore").css("border-color",d+e)):"box-shadow-positonx"==c||"box-shadow-positony"==c||"box-shadow-blur"==c||"box-shadow"==c?(d=a.currentcss["box-shadow"],d=d+" "+b["box-shadow-positonx"]+" "+b["box-shadow-positony"]+" "+b["box-shadow-blur"],a.para.children("textarea.custanet-tbFore").css("-moz-box-shadow",d+e),a.para.children("textarea.custanet-tbFore").css("-webkit-box-shadow",d+e)):"border-radius"==c?(a.para.children("textarea.custanet-tbFore").css("-moz-border-radius",b["border-radius"]+e),a.para.children("textarea.custanet-tbFore").css("-webkit-border-radius",b["border-radius"]+e)):"top"==c?a.para.css(c,b[c]):"left"==c?a.para.css(c,b[c]):"depth"==c?a.para.css("z-index",Number(baseZ)+Number(b[c])+e):"height"==c||"width"==c?a.para.children("textarea.custanet-tbFore").css(c,b[c]):a.para.children("textarea.custanet-tbFore").css(c,b[c]+e)}function cssUpdates(a,b){for(var c in myCs)myCs[c].isselected&&cssUpdate(myCs[c],a,b)}function setfonttable(a){""==a["font-family"]?($c("#custanet-font-family").append('<option value=""></option>'),$c("#custanet-font-family").attr("value","")):$c("#custanet-font-family").attr("value",a["font-family"]),"normal"==a["font-style"]&&"400"==a["font-weight"]?$c("#custanet-fontTypeface").attr("value","Regular"):"italic"==a["font-style"]&&"400"==a["font-weight"]?$c("#custanet-fontTypeface").attr("value","Italic"):"normal"==a["font-style"]&&"700"==a["font-weight"]?$c("#custanet-fontTypeface").attr("value","Bold"):"normal"==a["font-style"]&&"700"==a["font-weight"]?$c("#custanet-fontTypeface").attr("value","Bold Italic"):($c("#custanet-fontTypeface").append('<option value=""></option>'),$c("#custanet-fontTypeface").attr("value","")),""==a.color?($c("#custanet-color").attr("value","#"),$c("#custanet-color").css("background-color","#999"),hex2RgbHsv("#custanet-color","#000")):($c("#custanet-color").attr("value",a.color),$c("#custanet-color").css("background-color",a.color),$c.farbtastic($c("#custanet-color-picker").get(0),"#custanet-color").setColor(a.color),$c.farbtastic($c("#custanet-color-picker").get(0),"#custanet-color").updateDisplay,hex2RgbHsv("#custanet-color",a.color)),""==a["font-opacity"]?($c("#custanet-font-opacity-slider").slider("option","value",100),$c("#custanet-font-opacity-spin").attr("value","100")):($c("#custanet-font-opacity-slider").slider("option","value",parseInt(a["font-opacity"])),$c("#custanet-font-opacity-spin").attr("value",parseInt(a["font-opacity"]))),""==a["font-size"]?($c("#custanet-font-size-slider").slider("option","value",0),$c("#custanet-font-size-spin").attr("value","")):($c("#custanet-font-size-slider").slider("option","value",parseInt(a["font-size"])),$c("#custanet-font-size-spin").attr("value",parseInt(a["font-size"]))),""==a["text-decoration"]?($c("#custanet-text-decoration").append('<option value=""></option>'),$c("#custanet-text-decoration").attr("value","")):$c("#custanet-text-decoration").attr("value",a["text-decoration"]),""==a["text-align"]?($c("#custanet-text-align").append('<option value=""></option>'),$c("#custanet-text-align").attr("value","")):$c("#custanet-text-align").attr("value",a["text-align"]),""==a["letter-spacing"]?($c("#custanet-letter-spacing-slider").slider("option","value",0),$c("#custanet-letter-spacing-spin").attr("value","")):($c("#custanet-letter-spacing-slider").slider("option","value",parseInt(a["letter-spacing"])),$c("#custanet-letter-spacing-spin").attr("value",parseInt(a["letter-spacing"]))),""==a["word-spacing"]?($c("#custanet-word-spacing-slider").slider("option","value",0),$c("#custanet-word-spacing-spin").attr("value","")):($c("#custanet-word-spacing-slider").slider("option","value",parseInt(a["word-spacing"])),$c("#custanet-word-spacing-spin").attr("value",parseInt(a["word-spacing"]))),""==a["line-height"]?($c("#custanet-line-height-slider").slider("option","value",0),$c("#custanet-line-height-spin").attr("value","")):($c("#custanet-line-height-slider").slider("option","value",parseInt(a["line-height"])),$c("#custanet-line-height-spin").attr("value",parseInt(a["line-height"]))),""==a["text-shadow-positonx"]?($c("#custanet-text-shadow-positonx-slider").slider("option","value",0),$c("#custanet-text-shadow-positonx-spin").attr("value","")):($c("#custanet-text-shadow-positonx-slider").slider("option","value",parseInt(a["text-shadow-positonx"])),$c("#custanet-text-shadow-positonx-spin").attr("value",parseInt(a["text-shadow-positonx"]))),""==a["text-shadow-positony"]?($c("#custanet-text-shadow-positony-slider").slider("option","value",0),$c("#custanet-text-shadow-positony-spin").attr("value","")):($c("#custanet-text-shadow-positony-slider").slider("option","value",parseInt(a["text-shadow-positony"])),$c("#custanet-text-shadow-positony-spin").attr("value",parseInt(a["text-shadow-positony"]))),""==a["text-shadow-blur"]?($c("#custanet-text-shadow-blur-slider").slider("option","value",0),$c("#custanet-text-shadow-blur-spin").attr("value","")):($c("#custanet-text-shadow-blur-slider").slider("option","value",parseInt(a["text-shadow-blur"])),$c("#custanet-text-shadow-blur-spin").attr("value",parseInt(a["text-shadow-blur"]))),""==a["text-shadow"]?($c("#custanet-text-shadow").attr("value","#"),$c("#custanet-text-shadow").css("background-color","#999"),hex2RgbHsv("#custanet-text-shadow","#000")):1==a["text-shadow-flg"]&&($c("#custanet-text-shadow").attr("value",a["text-shadow"]),$c("#custanet-text-shadow").css("background-color",a["text-shadow"]),$c.farbtastic($c("#custanet-text-shadow-picker").get(0),"#custanet-text-shadow").setColor(a["text-shadow"]),$c.farbtastic($c("#custanet-text-shadow-picker").get(0),"#custanet-text-shadow").updateDisplay,hex2RgbHsv("#custanet-text-shadow",a["text-shadow"]))}function setareatable(a){""==a.top?($c("#custanet-top-slider").slider("option","value",0),$c("#custanet-top-spin").attr("value","")):($c("#custanet-top-slider").slider("option","value",parseInt(a.top)),$c("#custanet-top-spin").attr("value",parseInt(a.top))),""==a.left?($c("#custanet-left-slider").slider("option","value",0),$c("#custanet-left-spin").attr("value","")):($c("#custanet-left-slider").slider("option","value",parseInt(a.left)),$c("#custanet-left-spin").attr("value",parseInt(a.left))),""==a.depth?($c("#custanet-depth-slider").slider("option","value",0),$c("#custanet-depth-spin").attr("value","")):($c("#custanet-depth-slider").slider("option","value",parseInt(a.depth)),$c("#custanet-depth-spin").attr("value",parseInt(a.depth))),""==a.height?($c("#custanet-height-slider").slider("option","value",0),$c("#custanet-height-spin").attr("value","")):($c("#custanet-height-slider").slider("option","value",parseInt(a.height)),$c("#custanet-height-spin").attr("value",parseInt(a.height))),""==a.width?($c("#custanet-width-slider").slider("option","value",0),$c("#custanet-width-spin").attr("value","")):($c("#custanet-width-slider").slider("option","value",parseInt(a.width)),$c("#custanet-width-spin").attr("value",parseInt(a.width))),""==a["background-color"]?($c("#custanet-background-color").attr("value","#"),$c("#custanet-background-color").css("background-color","#999"),hex2RgbHsv("#custanet-background-color","#000")):($c("#custanet-background-color").attr("value",a["background-color"]),$c("#custanet-background-color").css("background-color",a["background-color"]),$c.farbtastic($c("#custanet-background-color-picker").get(0),"#custanet-background-color").setColor(a["background-color"]),$c.farbtastic($c("#custanet-background-color-picker").get(0),"#custanet-background-color").updateDisplay,hex2RgbHsv("#custanet-background-color",a["background-color"])),""==a["background-opacity"]?($c("#custanet-background-opacity-slider").slider("option","value",0),$c("#custanet-background-opacity-spin").attr("value","")):($c("#custanet-background-opacity-slider").slider("option","value",parseInt(a["background-opacity"])),$c("#custanet-background-opacity-spin").attr("value",parseInt(a["background-opacity"]))),""==a.padding?($c("#custanet-padding-slider").slider("option","value",0),$c("#custanet-padding-spin").attr("value","")):($c("#custanet-padding-slider").slider("option","value",parseInt(a.padding)),$c("#custanet-padding-spin").attr("value",parseInt(a.padding))),""==a["border-radius"]?($c("#custanet-border-radius-slider").slider("option","value",0),$c("#custanet-border-radius-spin").attr("value","")):($c("#custanet-border-radius-slider").slider("option","value",parseInt(a["border-radius"])),$c("#custanet-border-radius-spin").attr("value",parseInt(a["border-radius"]))),""==a["box-shadow-positonx"]?($c("#custanet-box-shadow-positonx-slider").slider("option","value",0),$c("#custanet-box-shadow-positonx-spin").attr("value","")):($c("#custanet-box-shadow-positonx-slider").slider("option","value",parseInt(a["box-shadow-positonx"])),$c("#custanet-box-shadow-positonx-spin").attr("value",parseInt(a["box-shadow-positonx"]))),""==a["box-shadow-positony"]?($c("#custanet-box-shadow-positony-slider").slider("option","value",0),$c("#custanet-box-shadow-positony-spin").attr("value","")):($c("#custanet-box-shadow-positony-slider").slider("option","value",parseInt(a["box-shadow-positony"])),$c("#custanet-box-shadow-positony-spin").attr("value",parseInt(a["box-shadow-positony"]))),""==a["box-shadow-blur"]?($c("#custanet-box-shadow-blur-slider").slider("option","value",0),$c("#custanet-box-shadow-blur-spin").attr("value","")):($c("#custanet-box-shadow-blur-slider").slider("option","value",parseInt(a["box-shadow-blur"])),$c("#custanet-box-shadow-blur-spin").attr("value",parseInt(a["box-shadow-blur"]))),""==a["box-shadow"]?($c("#custanet-box-shadow").attr("value","#"),$c("#custanet-box-shadow").css("background-color","#999"),hex2RgbHsv("#custanet-box-shadow","#000")):1==a["box-shadow-flg"]&&($c("#custanet-box-shadow").attr("value",a["box-shadow"]),$c("#custanet-box-shadow").css("background-color",a["box-shadow"]),$c.farbtastic($c("#custanet-box-shadow-picker").get(0),"#custanet-box-shadow").setColor(a["box-shadow"]),$c.farbtastic($c("#custanet-box-shadow-picker").get(0),"#custanet-box-shadow").updateDisplay,hex2RgbHsv("#custanet-box-shadow",a["box-shadow"]))}function setbordertable(a){""==a["border-style"]?($c("#custanet-border-style-family").append('<option value=""></option>'),$c("#custanet-border-style-family").attr("value","")):$c("#custanet-border-style-family").attr("value",a["border-style"]),""==a["border-color"]?($c("#custanet-border-color").attr("value","#"),$c("#custanet-border-color").css("border-color","#999"),hex2RgbHsv("#custanet-border-color","#000")):($c("#custanet-border-color").attr("value",a["border-color"]),$c("#custanet-border-color").css("border-color",a["border-color"]),$c.farbtastic($c("#custanet-border-color-picker").get(0),"#custanet-border-color").setColor(a["border-color"]),$c.farbtastic($c("#custanet-border-color-picker").get(0),"#custanet-border-color").updateDisplay,hex2RgbHsv("#custanet-border-color",a["border-color"])),""==a["border-width"]?($c("#custanet-border-width-slider").slider("option","value",0),$c("#custanet-border-width-spin").attr("value","")):($c("#custanet-border-width-slider").slider("option","value",parseInt(a["border-width"])),$c("#custanet-border-width-spin").attr("value",parseInt(a["border-width"])))}function fonttableformat(a){$c("#custanet-font-size-spin").custanetSpinSlider(a,100,0,1,"pt"),$c("#custanet-letter-spacing-spin").custanetSpinSlider(a,10,0,1,"pt"),$c("#custanet-word-spacing-spin").custanetSpinSlider(a,30,0,1,"pt"),$c("#custanet-line-height-spin").custanetSpinSlider(a,6,.6,.1,"em"),$c("#custanet-font-opacity-spin").custanetSpinSlider(a,100,0,1,""),$c("#custanet-text-shadow-positonx-spin").custanetSpinSlider(a,20,-20,1,"px"),$c("#custanet-text-shadow-positony-spin").custanetSpinSlider(a,20,-20,1,"px"),$c("#custanet-text-shadow-blur-spin").custanetSpinSlider(a,20,0,1,"px"),setColorPicker(a,"color"),$c("#custanet-color-picker").farbtastic("#custanet-color"),setColorPicker(a,"text-shadow"),$c("#custanet-text-shadow-picker").farbtastic("#custanet-text-shadow"),$c("#custanet-font-family").change(function(){a["font-family"]=$c(this).val(),cssUpdates(a,"font-family")}),$c("#custanet-fontTypeface").change(function(){var b,c,d=$c(this).val();"Regular"==d&&(b="normal",c="400"),"Italic"==d&&(b="italic",c="400"),"Bold"==d&&(b="normal",c="700"),"Bold Italic"==d&&(b="italic",c="700"),a["font-style"]=b,cssUpdates(a,"font-style"),a["font-weight"]=c,cssUpdates(a,"font-weight")}),$c("#custanet-text-align").change(function(){a["text-align"]=$c(this).val(),cssUpdates(a,"text-align")}),$c("#custanet-text-decoration").change(function(){a["text-decoration"]=$c(this).val(),cssUpdates(a,"text-decoration")})}function areatableformat(a){$c("#custanet-top-spin").custanetSpinSlider(a,4096,0,10,"px"),$c("#custanet-left-spin").custanetSpinSlider(a,4096,0,10,"px"),$c("#custanet-depth-spin").custanetSpinSlider(a,999,1,1,""),$c("#custanet-border-radius-spin").custanetSpinSlider(a,100,0,1,"px"),$c("#custanet-background-opacity-spin").custanetSpinSlider(a,100,0,1,""),$c("#custanet-padding-spin").custanetSpinSlider(a,100,0,1,"px"),$c("#custanet-height-spin").custanetSpinSlider(a,1024,50,1,"px"),$c("#custanet-width-spin").custanetSpinSlider(a,1024,50,1,"px"),$c("#custanet-box-shadow-positonx-spin").custanetSpinSlider(a,20,-20,1,"px"),$c("#custanet-box-shadow-positony-spin").custanetSpinSlider(a,20,-20,1,"px"),$c("#custanet-box-shadow-blur-spin").custanetSpinSlider(a,20,0,1,"px"),setColorPicker(a,"background-color"),$c("#custanet-background-color-picker").farbtastic("#custanet-background-color"),setColorPicker(a,"box-shadow"),$c("#custanet-box-shadow-picker").farbtastic("#custanet-box-shadow")}function bordertableformat(a){$c("#custanet-border-opacity-spin").custanetSpinSlider(a,100,0,1,""),$c("#custanet-border-width-spin").custanetSpinSlider(a,50,0,1,"px"),setColorPicker(a,"border-color"),$c("#custanet-border-color-picker").farbtastic("#custanet-border-color"),$c("#custanet-border-style").change(function(){a["border-style"]=$c(this).val(),cssUpdates(a,"border-style")})}function setColorPicker(a,b){b="custanet-"+b,$c("#"+b+"-r,#"+b+"-g,#"+b+"-b").spin({max:255,min:0,interval:1,changed:function(c){$c("#"+this.attr("id")+"-slider").slider("option","value",c),$c("#"+b).val(hexPack($c("#"+b+"-r").val(),$c("#"+b+"-g").val(),$c("#"+b+"-b").val())),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}}).keyup(function(){""!=this.value&&isNaN(this.value)&&(this.value="0"),parseInt(this.value)>255&&(this.value="255"),parseInt(this.value)<0&&(this.value="0"),$c("#"+this.id+"-slider").slider("option","value",parseInt(this.value)),$c("#"+b).val(hexPack($c("#"+b+"-r").val(),$c("#"+b+"-g").val(),$c("#"+b+"-b").val())),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}),$c("#"+b+"-r-slider,#"+b+"-g-slider,#"+b+"-b-slider").slider({min:0,max:255,step:1,slide:function(c,d){$c("#"+this.id.replace("-slider","")).val(d.value),$c("#"+b).val(hexPack($c("#"+b+"-r").val(),$c("#"+b+"-g").val(),$c("#"+b+"-b").val())),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}}),$c("#"+b+"-h").spin({max:360,min:0,interval:1,changed:function(){$c("#"+this.id+"-slider").slider("option","value",parseInt(this.value));var c=hsv2Rgb([$c("#"+b+"-h").val(),$c("#"+b+"-s").val(),$c("#"+b+"-v").val()]);$c("#"+b).val(hexPack(c[0],c[1],c[2])),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}}).keyup(function(){""!=this.value&&isNaN(this.value)&&(this.value="0"),parseInt(this.value)>360&&(this.value="360"),parseInt(this.value)<0&&(this.value="0"),$c("#"+this.id+"-slider").slider("option","value",parseInt(this.value));var c=hsv2Rgb([$c("#"+b+"-h").val(),$c("#"+b+"-s").val(),$c("#"+b+"-v").val()]);$c("#"+b).val(hexPack(c[0],c[1],c[2])),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}),$c("#"+b+"-h-slider").slider({min:0,max:360,step:1,slide:function(c,d){$c("#"+this.id.replace("-slider","")).val(d.value);var e=hsv2Rgb([$c("#"+b+"-h").val(),$c("#"+b+"-s").val(),$c("#"+b+"-v").val()]);$c("#"+b).val(hexPack(e[0],e[1],e[2])),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}}),$c("#"+b+"-s,#"+b+"-v").spin({max:1,min:0,interval:.01,changed:function(){$c("#"+this.id+"-slider").slider("option","value",parseInt(this.value));var c=hsv2Rgb([$c("#"+b+"-h").val(),$c("#"+b+"-s").val(),$c("#"+b+"-v").val()]);$c("#"+b).val(hexPack(c[0],c[1],c[2])),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}}).keyup(function(){""!=this.value&&isNaN(this.value)&&(this.value="0"),parseInt(this.value)>1&&(this.value="1.00"),parseInt(this.value)<0&&(this.value="0.00"),$c("#"+this.id+"-slider").slider("option","value",parseInt(this.value));var c=hsv2Rgb([$c("#"+b+"-h").val(),$c("#"+b+"-s").val(),$c("#"+b+"-v").val()]);$c("#"+b).val(hexPack(c[0],c[1],c[2])),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}),$c("#"+b+"-s-slider,#"+b+"-v-slider").slider({min:0,max:1,step:.01,slide:function(c,d){$c("#"+this.id.replace("-slider","")).val(d.value);var e=hsv2Rgb([$c("#"+b+"-h").val(),$c("#"+b+"-s").val(),$c("#"+b+"-v").val()]);$c("#"+b).val(hexPack(e[0],e[1],e[2])),a[b.replace("custanet-","")]=$c("#"+b).val(),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,cssUpdates(a,b.replace("custanet-",""))}}),$c("#"+b).val(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).setColor(a[b.replace("custanet-","")]),$c.farbtastic($c("#"+b+"-picker").get(0),"#"+b).updateDisplay,hex2RgbHsv("#"+b,a[b.replace("custanet-","")])}function hexPack(a,b,c){return a=parseInt(a),b=parseInt(b),c=parseInt(c),"#"+(16>a?"0":"")+a.toString(16)+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)}function hexUnpack(a){if(void 0!=a){if(7==a.length)return[parseInt("0x"+a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]}}function rgb2Hsv(a){var b,c,d;b=a[0]/255,c=a[1]/255,d=a[2]/255;var e,f,g=Math.max(b,c,d),h=Math.min(b,c,d),i=g,j=g-h;if(f=0==g?0:j/g,g==h)e=0;else{switch(g){case b:e=(c-d)/j+(d>c?6:0);break;case c:e=(d-b)/j+2;break;case d:e=(b-c)/j+4}e/=6}return e=Math.round(360*e),f=100*f,f=Math.round(f+.5),f/=100,f>1&&(f=1),i=100*i,i=Math.round(i+.5),i/=100,i>1&&(i=1),[e,f,i]}function hsv2Rgb(a){var b,c,d;b=a[0],c=a[1],d=a[2],b/=360;var e,f,g,h=Math.floor(6*b),i=6*b-h,j=d*(1-c),k=d*(1-i*c),l=d*(1-(1-i)*c);switch(h%6){case 0:e=d,f=l,g=j;break;case 1:e=k,f=d,g=j;break;case 2:e=j,f=d,g=l;break;case 3:e=j,f=k,g=d;break;case 4:e=l,f=j,g=d;break;case 5:e=d,f=j,g=k}return e=Math.round(255*e),f=Math.round(255*f),g=Math.round(255*g),[e,f,g]}function hex2RgbHsv(a,b){if(void 0!=b){var c;c=hexUnpack(b),$c(a+"-r").attr("value",255*c[0]),$c(a+"-g").attr("value",255*c[1]),$c(a+"-b").attr("value",255*c[2]),$c(a+"-r-slider").slider("option","value",255*c[0]),$c(a+"-g-slider").slider("option","value",255*c[1]),$c(a+"-b-slider").slider("option","value",255*c[2]);var d;d=rgb2Hsv([255*c[0],255*c[1],255*c[2]]),$c(a+"-h").attr("value",d[0]),$c(a+"-s").attr("value",d[1]),$c(a+"-v").attr("value",d[2]),$c(a+"-h-slider").slider("option","value",d[0]),$c(a+"-s-slider").slider("option","value",d[1]),$c(a+"-v-slider").slider("option","value",d[2])}}function resettablemenu(){$c("#custanet-color-rgbhsv,#custanet-background-color-rgbhsv,#custanet-border-color-rgbhsv,#custanet-text-shadow-rgbhsv,#custanet-box-shadow-rgbhsv").click(function(){var a=this.id.replace("-rgbhsv","");"R:"==$c("#"+a+"-rr").text()?($c("#"+a+"-rgbhsv").val("HSV2RGB"),$c("#"+a+"-rr").html("H:"),$c("#"+a+"-gg").html("S:"),$c("#"+a+"-bb").html("V:"),$c("#"+a+"-r-slider","#"+a+"-g-slider","#"+a+"-b-slider").css("display","none"),$c("#"+a+"-h-slider","#"+a+"-s-slider","#"+a+"-v-slider").css("display","block"),$c("#"+a+"-r","#"+a+"-g","#"+a+"-b").closest("div").css("display","none"),$c("#"+a+"-h","#"+a+"-s","#"+a+"-v").closest("div").css("display","block")):($c("#"+a+"-rgbhsv").val("RGB2HSV"),$c("#"+a+"-rr").html("R:"),$c("#"+a+"-gg").html("G:"),$c("#"+a+"-bb").html("B:"),$c("#"+a+"-r-slider","#"+a+"-g-slider","#"+a+"-b-slider").css("display","block"),$c("#"+a+"-h-slider","#"+a+"-s-slider","#"+a+"-v-slider").css("display","none"),$c("#"+a+"-r","#"+a+"-g","#"+a+"-b").closest("div").css("display","block"),$c("#"+a+"-h","#"+a+"-s","#"+a+"-v").closest("div").css("display","none"))}),$c("#custanet-background-table-row,#custanet-border-table-row,#custanet-color-table-row,#custanet-text-shadow-table-row,#custanet-box-shadow-table-row").hide(),$c("#custanet-color-button,#custanet-text-shadow-button,#custanet-background-color-button,#custanet-box-shadow-button,#custanet-border-color-button").click(function(){var a=$c(this).attr("id");a=a.replace("-button","-picker");var b=$c("."+a);"none"==b.css("display")?(b.show(),$c(this).val("HidePicker")):(b.hide(),$c(this).val("ShowPicker"))})}function ctn(){function a(a,b){var c={};$c.extend(c,b),delete c.browser,delete c.left,delete c.top;var d=$c("<textarea class='custanet-tbFore' style='margin:0px;'>"+a+"</textarea>");if($c(d).css(c),"IE6"!=browser&&"IE7"!=browser&&"IE8"!=browser){var e;e=hexUnpack(c.color),e="rgba("+255*e[0]+","+255*e[1]+","+255*e[2]+","+c["font-opacity"]/100+")",c.color=e,e=c["text-shadow"]+" "+c["text-shadow-positonx"]+" "+c["text-shadow-positony"]+" "+c["text-shadow-blur"],c["text-shadow"]=e,e=hexUnpack(c["background-color"]),e="rgba("+255*e[0]+","+255*e[1]+","+255*e[2]+","+c["background-opacity"]/100+")",c["background-color"]=e,"1"==c["box-shadow-flg"]?(e=c["box-shadow"]+" "+c["box-shadow-positonx"]+" "+c["box-shadow-positony"]+" "+c["box-shadow-blur"],c["-moz-box-shadow"]=e,c["-webkit-box-shadow"]=e,c["box-shadow"]=e):c["box-shadow"]="none",e=hexUnpack(c["border-color"]),e="rgba("+255*e[0]+","+255*e[1]+","+255*e[2]+","+c["border-opacity"]/100+")",c["border-color"]=e,c["-moz-border-radius"]=c["border-radius"],c["-webkit-border-radius"]=c["border-radius"],$c(d).css(c)}return d}var b;h=$c("#custanet-main-pannel").height(),w=$c("#custanet-main-pannel").width();var c=0;$c("#custanet-main-pannel-m").click(function(){$c("#custanet-main-pannel").resizable({disabled:!0}).css("opacity","1.0"),"-"==$c(this).text()?(h=$c("#custanet-main-pannel").height(),w=$c("#custanet-main-pannel").width(),$c("#custanet-command").css("display","none"),$c(this).text("+"),$c("#custanet-main-pannel").height("10").width("170")):($c("#custanet-command").css("display","block"),$c(this).text("-"),"block"==$c("#custanet-read-msg-c").css("display")&&$c("#custanet-main-pannel").resizable({disabled:!1}),$c("#custanet-main-pannel").height(h).width(w)),$c("#custanet-main-pannel").height("")}),$c("#custanet-main-pannel").css({position:"absolute",top:$c(window).scrollTop(),display:"","z-index":Number(zPannel)+Number(baseZ)+1e3}).draggable({cancel:"#custanet-others-msgs,#custanet-friend-text,#custanet-tag-s",stop:function(){c=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop)}}).resizable({alsoResize:"#custanet-others-msgs",minHeight:230,minWidth:170,start:function(){$c("#custanet-others-msgs").css("width","auto")},resize:function(){$c("#custanet-others-msgs").css("width","auto")},stop:function(){$c("#custanet-others-msgs").css("width","auto")}}),$c("#custanet-result,#custanet-navmenu").css("z-index",Number(zList)+Number(baseZ)),$c(".menuclass,#custanet-other-table").css("z-index",Number(zTable)+Number(baseZ)),$c(".menuclass").draggable({handle:".custanet-item-control-header,#custanet-property-head,#custanet-tag-head",cancel:"#custanet-other-text,#custanet-tag-pp",stop:function(){$c.data($c(this).get(0),"dragFlg",!0),"custanet-font-table"==$c(this).attr("id")?custanetfonttbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop):"custanet-area-table"==$c(this).attr("id")?custanetareatbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop):"custanet-border-table"==$c(this).attr("id")?custanetbordertbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop):"custanet-property-table"==$c(this).attr("id")?custanetprptbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop):"custanet-tag-table"==$c(this).attr("id")?custanettagtbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop):custanetothertbl==$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop)}}).click(function(a){a.stopImmediatePropagation()}),$c("#custanet-other-table").resizable({alsoResize:"#custanet-other-text"}),window.onscroll=function(){1!=ctype&&(document.getElementById("custanet-main-pannel").style.top=c+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-navmenu").style.top=custanetmenu+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-font-table").style.top=custanetfonttbl+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-area-table").style.top=custanetareatbl+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-border-table").style.top=custanetbordertbl+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-property-table").style.top=custanetprptbl+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-tag-table").style.top=custanettagtbl+(document.body.scrollTop||document.documentElement.scrollTop)+"px",document.getElementById("custanet-other-table").style.top=custanetothertbl+(document.body.scrollTop||document.documentElement.scrollTop)+"px")},$c("#custanet-font-close,#custanet-area-close,#custanet-border-close,#custanet-property-close,#custanet-tag-close").click(function(a){var b=$c(this).attr("id");b=b.replace("close","table"),$c("#"+b).css("display","none"),$c.data($c("#"+b).get(0),"dragFlg",!1),a.stopImmediatePropagation()}),$c("#custanet-other-close").click(function(a){$c("#custanet-other-table").css("display","none"),a.stopImmediatePropagation()}),$c("#custanet-command-yours").click(function(){$c(this).is(":checked")?$c("div.custanet-simp-pri,div.custanet-cnt-pri").css("display",""):$c("div.custanet-simp-pri,div.custanet-cnt-pri").css("display","none");
for(var a in myCs)myCs[a].para.css("display","none")}),$c("#custanet-command-friends").click(function(){$c(this).is(":checked")?$c("div.custanet-simp-fri,div.custanet-cnt-fri").css("display","block"):$c("div.custanet-simp-fri,div.custanet-cnt-fri").css("display","none"),$c("div.custanet-otherBox").each(function(){$c(this).css("display","none")})}),$c("#custanet-command-others").click(function(){$c(this).is(":checked")?$c("div.custanet-simp-pub,div.custanet-cnt-pub,div.custanet-simp-oth,div.custanet-cnt-oth").css("display","block"):$c("div.custanet-simp-pub,div.custanet-cnt-pub,div.custanet-simp-oth,div.custanet-cnt-oth").css("display","none"),$c("div.custanet-otherBox").each(function(){$c(this).css("display","none")})}),$c("#custanet-div-logo").click(function(){$c("body").css("height","800px").css("width","1000px")}),$c("#custanet-div-name").click(function(){$c("body").css("height","").css("width","")});var d=function(a){var b=parseInt(a.para.css("top"))+20;b+="px";var c=parseInt(a.para.css("left"))+20;c+="px",a.para.css("top",b).css("left",c).css("border-width","0px"),a.isselected=!1,$c("input[name='custanet-list-cnt'][value='"+a.key+"']").prop("checked",!1).parents("tr").find("td").css("background-color","white")},e=function(a,b,c){var e,f,g,h="";if(null==c)for(var i in myCs)myCs[i].isselected&&d(myCs[i]);else{$c(a).css("border-width","20px"),0==myCs[c].isselected&&(e=parseInt(myCs[c].para.css("top"))-20,e+="px",f=parseInt(myCs[c].para.css("left"))-20,f+="px",g="r"==myCs[c].auth?pric:"u"==myCs[c].auth||"t"==myCs[c].auth?pubc:fric,$c(a).css("top",e).css("left",f).css("border-color",g),myCs[c].isselected=!0);var j=!0;for(var i in myCs)myCs[i].isselected&&(j?(h=myCs[i].auth,j=!1):h!=myCs[i].auth&&(h="",k=l+1));if(""==h)$c("#custanet-ppy-tw").find("input").prop("checked",!1),$c("input.custanet-ppy-pri,input.custanet-ppy-pub").prop("checked",!1);else if("r"==h)$c("input.custanet-ppy-pri").prop("checked",!0),$c("td.custanet-tw").parents("tr").css("display","none");else if("u"==h)$c("input.custanet-ppy-pub").prop("checked",!0),$c("tr.custanet-ppy-fg").css("display","none");else if("t"==h)$c("input.custanet-ppy-pub").prop("checked",!0),$c("td.custanet-tw").find("input").prop("checked",!0);else{$c(".custanet-ppy-fg").css("display","block"),$c("input.custanet-ppy-fri").prop("checked",!0),h=myCs[c].auth,h=h.split(" "),$c("input.custanet-friend-send").prop("checked",!0);for(var k=0,l=h.length;l>k;k++)$c("input.custanet-friend-send[value='"+h[k]+"']").prop("checked",!0)}}"block"==$c("#custanet-navmenu").css("display")&&$c("#custanet-navmenu").css("display","none"),$c.data($c("#custanet-font-table").get(0),"dragFlg")?$c("#custanet-menu-font").click():$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-area-table").get(0),"dragFlg")?$c("#custanet-menu-area").click():$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")?$c("#custanet-menu-border").click():$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")?$c("#custanet-menu-property").click():$c("#custanet-property-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")?$c("#custanet-menu-tag").click():$c("#custanet-tag-table").css("display","none"),$c("#custanet-navmenu").css("display","block").css("position","absolute").css("top",$c(window).scrollTop()+b.clientY+"px").css("left",$c(window).scrollLeft()+b.clientX+"px"),custanetmenu=$c("#custanet-navmenu").offset().top-(document.body.scrollTop||document.documentElement.scrollTop),$c("#custanet-msg-c").click(),null==c?$c("#custanet-menu-font,#custanet-menu-area,#custanet-menu-border,#custanet-menu-copy,#custanet-menu-delete").hide().parents("li").css("height","0"):$c("#custanet-menu-font,#custanet-menu-area,#custanet-menu-border,#custanet-menu-copy,#custanet-menu-delete").show().parents("li").css("height","auto"),constFlg="custanet-friend-text"==b.target.id?!0:!1},f=function(a,b){this.key=a,this.para=b,this.cid="",this.isselected=!1,this.auth="u",this.tag="",this.tw=!1;var c={};if($c.extend(c,defaultCss),c.top=b.css("top"),c.left=b.css("left"),this.currentcss=c,this.toMe=function(){var a={},b="";return a.auth=this.auth.split(" "),a.tw=this.tw,a.key=this.key,this.currentcss.bheight=$c("body").height(),this.currentcss.bwidth=$c("body").width(),a.css=JSON.stringify(this.currentcss),b=this.para.children("textarea").val(),a.txt=b,a.tag=this.tag,JSON.stringify(a)},!$c("#custanet-font-opacity-slider").hasClass("ui-slider")){var f={};$c.extend(f,this.currentcss),fonttableformat(f),areatableformat(f),bordertableformat(f),resettablemenu()}$c(this.para).draggable({start:function(){for(var a in myCs)myCs[a].isselected&&(myCs[a].startTop=parseInt(myCs[a].para.css("top")),myCs[a].startLeft=parseInt(myCs[a].para.css("left")))},drag:function(b,c){var d=c.position.top-myCs[a].startTop,e=c.position.left-myCs[a].startLeft;for(var f in myCs)f!=a&&myCs[f].isselected&&(myCs[f].para.css("top",myCs[f].startTop+d+"px"),myCs[f].para.css("left",myCs[f].startLeft+e+"px"))},stop:function(b,c){var d=c.position.top-myCs[a].startTop,f=c.position.left-myCs[a].startLeft;for(var g in myCs)myCs[g].isselected&&(myCs[g].currentcss.top=myCs[g].startTop+d+20+"px",myCs[g].currentcss.left=myCs[g].startLeft+f+20+"px");("createTouch"in document||"ontouchstarT"in document)&&e(this,b,a)}}).resizable({resize:function(a,b){var c,d,e=(b.size.width,b.size.height,parseInt(b.size.width)-parseInt(b.originalSize.width)),f=parseInt(b.size.height)-parseInt(b.originalSize.height),g=window.navigator.appVersion.toLowerCase();for(var h in myCs)myCs[h].isselected&&(c=parseInt(myCs[h].para.children("textarea.custanet-tbFore").css("paddingTop")),d=parseInt(myCs[h].para.children("textarea.custanet-tbFore").css("border-top-width")),-1!=g.indexOf("msie")?(myCs[h].para.children("textarea.custanet-tbFore").height(parseInt(myCs[h].currentcss.height)+f-40),myCs[h].para.children("textarea.custanet-tbFore").width(parseInt(myCs[h].currentcss.width)+e-40),myCs[h].para.height(myCs[h].para.children("textarea.custanet-tbFore").outerHeight()+40),myCs[h].para.width(myCs[h].para.children("textarea.custanet-tbFore").outerWidth()+40),myCs[h].para.children("textarea.custanet-tbFore").outerHeight()<=2*d+2*c&&(myCs[h].para.children("textarea.custanet-tbFore").height(2*d+2*c),myCs[h].para.height(2*d+2*c+40)),myCs[h].para.children("textarea.custanet-tbFore").outerWidth()<=2*d+2*c&&(myCs[h].para.children("textarea.custanet-tbFore").width(2*d+2*c),myCs[h].para.width(2*d+2*c+40))):(myCs[h].para.children("textarea.custanet-tbFore").height(parseInt(myCs[h].currentcss.height)+f),myCs[h].para.children("textarea.custanet-tbFore").width(parseInt(myCs[h].currentcss.width)+e),myCs[h].para.height(myCs[h].para.children("textarea.custanet-tbFore").outerHeight()),myCs[h].para.width(myCs[h].para.children("textarea.custanet-tbFore").outerWidth())))},stop:function(a,b){for(var c in myCs)if(myCs[c].isselected){myCs[c].currentcss.width=parseInt(myCs[c].currentcss.width)+parseInt(b.size.width)-parseInt(b.originalSize.width)+"px",myCs[c].currentcss.height=parseInt(myCs[c].currentcss.height)+parseInt(b.size.height)-parseInt(b.originalSize.height)+"px";var d=new Date;myCs[c].currentcss.time=d.toLocaleString()}}}).resizable("disable").css("opacity","1.00").click(function(b){if($c(this).hasClass("custanet-itemBox")){if($c(this).resizable("enable"),"Write freely!!"==$c(this).find("textarea").text()&&$c(this).find("textarea").text(""),!b.metaKey)for(var c in myCs)myCs[c].isselected&&d(myCs[c]);if($c(this).css("border-width","20px"),$c(this).width($c(this).children("textarea").outerWidth()+0).height($c(this).children("textarea").outerHeight()+0),0==myCs[a].isselected){var e;e="r"==myCs[a].auth?pric:"u"==myCs[a].auth?pubc:"t"==myCs[a].auth?pubc:fric,$c(this).css("top",parseInt(myCs[a].para.css("top"))-20+"px").css("left",parseInt(myCs[a].para.css("left"))-20+"px").css("border-color",e),myCs[a].isselected=!0}$c.data($c("#custanet-font-table").get(0),"dragFlg")?$c("#custanet-menu-font").click():$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-area-table").get(0),"dragFlg")?$c("#custanet-menu-area").click():$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")?$c("#custanet-menu-border").click():$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")?$c("#custanet-menu-property").click():$c("#custanet-property-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")?$c("#custanet-menu-tag").click():$c("#custanet-tag-table").css("display","none"),"block"==$c("#custanet-navmenu").css("display")&&$c("#custanet-navmenu").css("display","none")}return!1}).bind("contextmenu",function(b){return e(this,b,a),!1})};$c("#custanet-friend-text").bind("contextmenu",function(a){return e(this,a,null),!1}),1!=ctype&&$c("div.custanet-defaultItemBox").draggable({opacity:.5,helper:"clone",cancel:"none",start:function(b,c){var d=$c("#custanet-friend-text").val();d=""==d?a("Write freely!!",defaultCss):a(d,defaultCss),$c(c.helper.get(0)).html(d)},stop:function(a,b){var c=$c(b.helper.get(0)).clone();$c(c).removeClass("custanet-defaultItemBox").addClass("custanet-itemBox").css({position:"absolute",opacity:"1.0",top:$c(b.helper.get(0)).offset().top,left:$c(b.helper.get(0)).offset().left}).prepend("<div class='custanet-not-saved-icon'>not saved</div>"),$c("body:first").append($c(c));var g=randomStr();myCs[g]=new f(g,$c(c));var h=0;for(key in myCs)h++;myCs[g].currentcss.depth=Number(myCs[g].currentcss.depth)+Number(h),myCs[g].para.css("z-index",Number(myCs[g].currentcss.depth)+Number(baseZ));for(var i in myCs)myCs[i].isselected&&d(myCs[i]);("createTouch"in document||"ontouchstarT"in document)&&e($c(c),a,g),$c("#custanet-main-pannel").height("")}}).click(function(){$c(this).find("textarea").focus()}),$c("#custanet-menu-copy").click(function(){var b,c,d;for(var e in myCs)if(myCs[e].isselected){b=parseInt(myCs[e].para.css("top"))+80,c=parseInt(myCs[e].para.css("left"))+80,d=Number(myCs[e].para.css("z-index"))+1;var g={};$c.extend(g,myCs[e].currentcss);var h=a(myCs[e].para.find("textarea").val(),g),i=$c("<div></div>");$c(i).html(h).css({position:"absolute",top:b,left:c,"z-index":d}).prepend("<div class='custanet-not-saved-icon'>not saved</div>"),0==g["text-shadow-flg"]&&$c(h).css("text-shadow",""),0==g["box-shadow-flg"]&&$c(h).css("box-shadow","none").css("-moz-box-shadow","none").css("-webkit-box-shadow","none"),$c("body:first").append(i);var j=randomStr();myCs[j]=new f(j,$c(i)),myCs[j].currentcss["z-index"]=d,myCs[j].currentcss.top=b,myCs[j].currentcss.left=c,myCs[j].isselected=!1,$c(i).addClass("custanet-itemBox")}return!1}),$c("#custanet-menu-delete").click(function(){var a,b=!1,c={action:"save",pw:pw,browser:browser,url:location.href,title:document.title},d=$c("#custanet-your-list"),e=new Array;for(var f in myCs)myCs[f].isselected&&(10==f.length?(a=d.find("input:checkbox[value^="+f+"]"),a.size()>0&&$c(a).parents("tr").remove(),1==d.find("tr").size()&&$c("#custanet-not-saved").remove()):(b=!0,e.push(myCs[f].toMe())),myCs[f].para.remove(),delete myCs[f]);b&&(c.cns=e),$c.ajax({url:debugStr+"/del",type:"POST",data:c,success:function(a){a=jQuery.parseJSON(a),i(a,!1)},error:function(){}})}),$c("#custanet-menu-font").click(function(){$c.data($c("#custanet-area-table").get(0),"dragFlg")||$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")||$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")||$c("#custanet-property-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")||$c("#custanet-tag-table").css("display","none");var a=!0,b={};for(var c in myCs)if(myCs[c].isselected)if(1==a)$c.extend(b,myCs[c].currentcss),a=!1;else for(var d in b)b[d]==myCs[c].currentcss[d]||(b[d]="");return 0==b["text-shadow-flg"]&&$c("input[name='custanet-text-shadow-radio']:eq(1)").click(),setfonttable(b),$c.data($c("#custanet-font-table").get(0),"dragFlg")||$c("#custanet-font-table").css("display","block").css("position","absolute").css("top",parseInt($c("#custanet-navmenu").css("top"))+50+"px").css("left",parseInt($c("#custanet-navmenu").css("left"))+80+"px"),custanetfonttbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop),!1}),$c("#custanet-menu-area").click(function(){$c.data($c("#custanet-font-table").get(0),"dragFlg")||$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")||$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")||$c("#custanet-property-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")||$c("#custanet-tag-table").css("display","none");var a=!0,b={};for(var c in myCs)if(myCs[c].isselected)if(1==a)$c.extend(b,myCs[c].currentcss),a=!1;else for(var d in b)b[d]==myCs[c].currentcss[d]||(b[d]="");return 0==b["box-shadow-flg"]&&$c("input[name=custanet-box-shadow-radio]:eq(1)").click(),setareatable(b),$c.data($c("#custanet-area-table").get(0),"dragFlg")||$c("#custanet-area-table").css("display","block").css("position","absolute").css("top",parseInt($c("#custanet-navmenu").css("top"))+78+"px").css("left",parseInt($c("#custanet-navmenu").css("left"))+80+"px"),custanetareatbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop),!1}),$c("#custanet-menu-border").click(function(){$c.data($c("#custanet-font-table").get(0),"dragFlg")||$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-area-table").get(0),"dragFlg")||$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")||$c("#custanet-property-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")||$c("#custanet-tag-table").css("display","none");var a=!0,c={};for(var d in myCs)if(myCs[d].isselected)if(1==a)$c.extend(c,myCs[d].currentcss),a=!1;else for(var e in c)c[e]==items[b].currentcss[e]||(c[e]="");return setbordertable(c),$c.data($c("#custanet-border-table").get(0),"dragFlg")||$c("#custanet-border-table").css("display","block").css("position","absolute").css("top",parseInt($c("#custanet-navmenu").css("top"))+105+"px").css("left",parseInt($c("#custanet-navmenu").css("left"))+80+"px"),custanetbordertbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop),!1}),$c("#custanet-menu-property").click(function(){if($c.data($c("#custanet-font-table").get(0),"dragFlg")||$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-area-table").get(0),"dragFlg")||$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")||$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")||$c("#custanet-tag-table").css("display","none"),!constFlg){var a="custanet-int";for(var b in myCs)myCs[b].isselected&&("custanet-int"==a?a=myCs[b].auth:a!=myCs[b].auth&&(a="",d=e+1));if($c("td.custanet-tw").find("input").prop("checked",!1),$c("input.custanet-friend-send").prop("checked",!1),""==a)$c("#custanet-ppy-tw").find("input").prop("checked",!1),$c("input.custanet-ppy-pri,input.custanet-ppy-pub").prop("checked",!1);else if("r"==a)$c("input.custanet-ppy-pri").prop("checked",!0);else if("u"==a)$c("input.custanet-ppy-pub").prop("checked",!0);else if("t"==a)$c("input.custanet-ppy-pub").prop("checked",!0),$c("td.custanet-tw").find("input").prop("checked",!0);else{var c;$c("input.custanet-ppy-fri").prop("checked",!0),c=a.split(" "),$c("input.custanet-friend-send").prop("checked",!1);for(var d=0,e=c.length;e>d;d++)$c("input.custanet-friend-send[value='"+c[d]+"']").prop("checked",!0)}}return $c.data($c("#custanet-property-table").get(0),"dragFlg")||$c("#custanet-property-table").css("display","block").css("position","absolute").css("top",parseInt($c("#custanet-navmenu").css("top"))+21+"px").css("left",parseInt($c("#custanet-navmenu").css("left"))+80+"px"),custanetprptbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop),!1}),$c("#custanet-menu-tag").click(function(){$c.data($c("#custanet-font-table").get(0),"dragFlg")||$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-area-table").get(0),"dragFlg")||$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")||$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")||$c("#custanet-property-table").css("display","none");var a="custanet-int";for(var c in myCs)myCs[c].isselected&&("custanet-int"==a?a=myCs[c].tag:a!=myCs[c].tag&&(a="",b=j+1));return $c("div.custanet-tag-pp-s-active").removeClass("custanet-tag-pp-s-active"),""!=a&&$c("#custanet-tag-pp-s").find("span").each(function(){$c(this).html()==a&&$c(this).parent("div").addClass("custanet-tag-pp-s-active")}),$c.data($c("#custanet-tag-table").get(0),"dragFlg")||$c("#custanet-tag-table").css("display","block").css("position","absolute").css("top",parseInt($c("#custanet-navmenu").css("top"))+21+"px").css("left",parseInt($c("#custanet-navmenu").css("left"))+80+"px"),custanettagtbl=$c(this).offset().top-(document.body.scrollTop||document.documentElement.scrollTop),!1}),$c("input[name='custanet-ppy-pp']").click(function(a){var b,c="";c=$c(this).attr("value"),$c("input."+$c(this).attr("class")).attr("checked",$c(this).attr("checked")),$c("td.custanet-tw").find("input").attr("checked",!1),"r"==c||"u"==c?("r"==c?b=pric:"u"==c&&(b=pubc),$c(".custanet-ppy-fg").css("display","none")):"f"==c&&(b=fric,$c(".custanet-ppy-fg").css("display","block")),$c("input.custanet-friend-send,input.custanet-group-send").attr("checked",!1);for(var d in myCs)myCs[d].isselected&&(myCs[d].auth=c,myCs[d].para.css("border-color",b));$c("#custanet-friend-text").css("background-color",b),$c("tr.custanet-list-spl").find("input:checked").parents("tr").children("td").css("background-color",b),a.stopImmediatePropagation()}),$c("input.custanet-friend-send").click(function(){$c(this).is(":checked")?$c("input.custanet-friend-send[value="+$c(this).val()+"]").prop("checked",!0):$c("input.custanet-friend-send[value="+$c(this).val()+"]").prop("checked",!1);var a,c=!1,d="",e=[];$c("input.custanet-friend-send").each(function(){$c(this).is(":checked")&&(c=!0)}),c?(c="",$c("input.custanet-friend-send:checked").each(function(){e.push($c(this).val())}),c=e.join(" "),d="f",a=fric):(c="r",d="r",a=pric),$c("#custanet-friend-text").css("background-color",a);for(var f in myCs)if(myCs[f].isselected){myCs[f].auth=c,myCs[f].para.css("border-color",a);var g=$c("#custanet-your-list").find("input:checkbox[value^="+b+"]");$c(g).attr("checked",!0).parents("tr").children("td").css("background-color",a),$c(g).parents("tr").children("td:eq(2)").html(d)}}),$c("input.custanet-ppy-tw").change(function(){if("t"==$c("input[name='custanet-ppy-tw']:checked").val())for(var a in myCs)myCs[a].isselected&&(myCs[a].tw=!0);else for(var a in myCs)myCs[a].isselected&&(myCs[a].tw=!1)}),$c("input[name='custanet-text-shadow-radio'],input[name='custanet-box-shadow-radio']").click(function(a){var b=$c(this).attr("name");if(b=b.replace("custanet-",""),b=b.replace("-radio",""),0==$c(this).attr("value")){$c("tr.custanet-"+b+"-noborder").hide(),$c("#custanet-"+b+"-table-row").hide(),$c("#custanet-"+b+"-button").attr("value","ShowPicker");for(var c in myCs)myCs[c].isselected&&(myCs[c].currentcss[b+"-flg"]=0,"text-shadow"==b?myCs[c].para.children("textarea.custanet-tbFore").css(b,""):myCs[c].para.children("textarea.custanet-tbFore").css("box-shadow","none").css("-moz-box-shadow","none").css("-webkit-box-shadow","none"))}else{$c("tr.custanet-"+b+"-noborder").show();for(var c in myCs)myCs[c].isselected&&(value=myCs[c].currentcss[b]+" "+myCs[c].currentcss[b+"-positonx"]+" "+myCs[c].currentcss[b+"-positony"]+" "+myCs[c].currentcss[b+"-blur"],myCs[c].currentcss[b+"-flg"]=1,"text-shadow"==b?myCs[c].para.children("textarea.custanet-tbFore").css(b,value):myCs[c].para.children("textarea.custanet-tbFore").css("box-shadow",value).css("-moz-box-shadow",value).css("-webkit-box-shadow",value))}a.stopImmediatePropagation()}),$c("#custanet-font-default,#custanet-area-default,#custanet-border-default,#custanet-property-default").click(function(a){var b={action:"default",pw:pw,url:location.href},c={};switch($c(this).attr("id")){case"custanet-font-default":c["font-family"]=$c("#custanet-font-family").val(),c.color=$c("#custanet-color").val(),c["font-opacity"]=$c("#custanet-font-opacity-spin").val(),c["font-size"]=$c("#custanet-font-size-spin").val()+"pt","Regular"==$c("#custanet-fontTypeface").val()?(c["font-style"]="normal",c["font-weight"]="400"):"Italic"==$c("#custanet-fontTypeface").val()?(c["font-style"]="italic",c["font-weight"]="400"):"Bold"==$c("#custanet-fontTypeface").val()?(c["font-style"]="normal",c["font-weight"]="700"):(c["font-style"]="italic",c["font-weight"]="700"),c["text-decoration"]=$c("#custanet-text-decoration").val(),c["letter-spacing"]=$c("#custanet-letter-spacing-spin").val()+"px",c["word-spacing"]=$c("#custanet-word-spacing-spin").val()+"px",c["line-height"]=$c("#custanet-line-height-spin").val()+"em",c["text-align"]=$c("#custanet-text-align").val(),c["text-shadow-positonx"]=$c("#custanet-text-shadow-positonx-spin").val()+"px",c["text-shadow-positony"]=$c("#custanet-text-shadow-positony-spin").val()+"px",c["text-shadow-blur"]=$c("#custanet-text-shadow-blur-spin").val()+"px",c["text-shadow"]=$c("#custanet-text-shadow").val(),c["text-shadow-flg"]=$c("input[name='custanet-text-shadow-radio']:checked").val();break;case"custanet-area-default":c.depth=$c("#custanet-depth-spin").val(),c.height=$c("#custanet-height-spin").val()+"px",c.width=$c("#custanet-width-spin").val()+"px",c["background-color"]=$c("#custanet-background-color").val(),c["background-opacity"]=$c("#custanet-background-opacity-spin").val(),c.padding=$c("#custanet-padding-spin").val()+"px",c["border-radius"]=$c("#custanet-border-radius-spin").val()+"px",c["box-shadow"]=$c("#custanet-box-shadow").val(),c["box-shadow-flg"]=$c("input[name='custanet-box-shadow-radio']:checked").val(),c["box-shadow-positonx"]=$c("#custanet-box-shadow-positonx-spin").val()+"px",c["box-shadow-positony"]=$c("#custanet-box-shadow-positony-spin").val()+"px",c["box-shadow-blur"]=$c("#custanet-box-shadow-blur-spin").val()+"px";break;case"custanet-border-default":c["border-style"]=$c("#custanet-border-style").val(),c["border-color"]=$c("#custanet-border-color").val(),c["border-opacity"]=$c("#custanet-border-opacity-spin").val(),c["border-width"]=$c("#custanet-border-width-spin").val()+"px";break;case"custanet-property-default":}b.css=JSON.stringify(c);var d=$(this);d.css("visibility","hidden"),$c.ajax({url:debugStr+"/set",type:"POST",data:b,success:function(a){a=a.replace(/'/g,""),defaultCss=jQuery.parseJSON(a),setTimeout(function(){d.css("visibility","visible")},3e3)},error:function(){setTimeout(function(){d.css("visibility","visible")},3e3)}}),a.stopImmediatePropagation()}),$c("div.custanet-others-msg").on("click",function(){var a=$c(this).find("a").html();return"block"==oitems[a].css("display")?(oitems[a].css("display","none"),$c(this).css("background-color","#FFF")):(oitems[a].css("display","block"),$c(this).css("background-color","")),!1}),$c("#custanet-main-pannel").click(function(a){a.stopImmediatePropagation()}),$c("html,#stopimmediatePropagation").click(function(){$c.data($c("#custanet-font-table").get(0),"dragFlg")||$c("#custanet-font-table").css("display","none"),$c.data($c("#custanet-area-table").get(0),"dragFlg")||$c("#custanet-area-table").css("display","none"),$c.data($c("#custanet-border-table").get(0),"dragFlg")||$c("#custanet-border-table").css("display","none"),$c.data($c("#custanet-property-table").get(0),"dragFlg")||$c("#custanet-property-table").css("display","none"),$c.data($c("#custanet-tag-table").get(0),"dragFlg")||$c("#custanet-tag-table").css("display","none"),$c("#custanet-navmenu").css("display","none");for(var a in myCs)myCs[a].isselected&&d(myCs[a]);$c("#custanet-your-list").find("input:checkbox").attr("checked",!1),$c("#custanet-your-list").find("td").css("background-color","white")});var g=function(a){a=!constFlg;var b="";for(key in defaultCss)b=b+defaultCss[key]+"!";var c={action:"save",pw:pw,browser:browser,url:location.href,title:document.title};if($c("span.custanet-time:first").size()>0&&(c.dt=$c("span.custanet-time:first").html()),a){var d=new Array;for(var e in myCs)myCs[e].isselected&&d.push(myCs[e].toMe());c.cns=d}else{var f={},g=[],b=$c("input[name='custanet-ppy-pp']:checked").val();"f"==b&&($c("input.custanet-friend-send:checked").each(function(){g.push($c(this).val())}),b=g),f.auth=b,"t"==$c("input[name='custanet-spl-tw']:checked").val()&&(f.tw="true"),f.txt=$c("#custanet-friend-text").val(),$c("#custanet-friend-text").val(""),f.key=randomStr(),CurlTag=[],$c("#custanet-tag-pp-s div.custanet-tag-active").each(function(){CurlTag.push($c(this).find("span").attr("class"))}),f.tag=CurlTag;var d=new Array;d.push(JSON.stringify(f)),c.cns=d}$c.ajax({url:debugStr+"/set",type:"POST",data:c,success:function(a){a=jQuery.parseJSON(a),i(a,!1)},error:function(){}}),$("#custanet-navmenu").hide()};$c("#custanet-menu-save").click(function(){return g(!0),!1});$c("#custanet-others-msgs").delegate(".custanet-cnt-pri,.custanet-cnt-pub,.custanet-cnt-fri","click",function(){var a=$c(this).find("span.custanet-key").attr("value");"none"==myCs[a].para.css("display")?(myCs[a].para.css("display","block").click(),$c(this).addClass("active"),null!=myCs[a].bwidth&&$c("body").width(myCs[a].bwidth).height(myCs[a].bheight)):(myCs[a].para.css("display","none"),$c(this).removeClass("active"),$c("body").css({width:"auto",height:"auto"}))});var i=function(b,c){var d,e,g,h,i=$c("#custanet-others-msgs"),j="";for(var k in b)if(void 0!=b[k].key){if(d="",e="",g="",k=b[k],k.usr[0].id==cuser.key&&"r"==k.pub)d=pric,h="custanet-cnt-pri";else if("u"==k.pub)d=pubc,h="custanet-cnt-pub";else{d=fric,h="custanet-cnt-fri";var l=new Array;for(cu in k.usr)void 0!=k.usr[cu].id&&l.push(k.usr[cu].id);k.pub=l.join(" ")}"true"==k.tw&&(e="<img style='padding:2px;' height='14px' src='http://twitter-badges.s3.amazonaws.com/t_mini-a.png'>"),""!=k.css&&void 0!=k.css?g="ui-icon ui-icon-radio-on":h="",$c("span.custanet-key[value='"+k.wrk+"']").parents("div.custanet-cnt-pri").remove(),$c("span.custanet-key[value='"+k.wrk+"']").parents("div.custanet-cnt-fri").remove(),$c("span.custanet-key[value='"+k.wrk+"']").parents("div.custanet-cnt-pub").remove();var m="";for(t in k.tag)void 0!=custanet_genre[k.tag[t]]&&(m+=custanet_genre[k.tag[t]]+" ");if(j+="<div class='"+h+"'><div style='background-color:"+d+"'><span class='"+g+"' style='float:left;height:15px;width:16px;'></span>"+e+"<span class='custanet-key' value='"+k.key+"'></span><span class='custanet-user-key' value='"+k.usr[0].id+"'></span><span class='custanet-user-name' style='float:left;'>"+k.usr[0].nam+"</span><br><span class='custanet-time'>"+k.dat+"</span><br><span class='custanet-tag'>"+m+"</span></div><div style='word-break: break-all;margin-bottom:20px;'>"+k.txt+"<br></div></div>",$c("input[name='custanet-list-cnt'][value='"+k.wrk+"']").parents("tr").remove(),0==$c(".custanet-list-div").size()&&$c("#custanet-not-saved").remove(),""!=k.css&&void 0!=k.css){for(var n in myCs)null!=myCs[k.key]&&$c(myCs[k.key].para).remove(),null!=myCs[k.wrk]&&$c(myCs[k.wrk].para).remove();var o={};$c.extend(o,jQuery.parseJSON(k.css));var p=a(k.txt.replace(/<br>/g,"\r\n"),o),q=$c("<div></div>");$c(q).html(p).css("position","absolute").css("top",o.top).css("left",o.left).css("display","none").css("z-index",Number(o.depth)+Number(baseZ)),0==o["text-shadow-flg"]&&$c(p).css("text-shadow",""),0==o["box-shadow-flg"]&&$c(p).css("box-shadow","none").css("-moz-box-shadow","none").css("-webkit-box-shadow","none"),$c("body:first").append(q),myCs[k.key]=new f(k.key,$c(q)),myCs[k.key].auth=k.pub,myCs[k.key].bwidth=o.bwidth,myCs[k.key].bheight=o.bheight,myCs[k.key].currentcss=o,$c(q).addClass("custanet-itemBox")}}c?$c(i).append(j):$c(i).prepend(j),0==$c("#custanet-others-msgs div").size()?$c("#custanet-others-msgs").html("<div id='custanet-nopost'>no post</div>"):$c("#custanet-nopost").remove(),$c("#custanet-main-pannel").css("display","block")};$c("#custanet-makefriend").click(function(){for(var a=[{o:$c("#custanet-makefriend-id").html()},{pw:pw},{i:!0}],b="",c=0;c<a.length;c++)b=b+$c.param(a[c])+"&";$.ajax({url:debugStr+"/other",dataType:"text",data:b,xhr:window.XDomainRequest?hookXhr:void 0,success:function(){}})});for(var b=0,j=items.length;j>b;b++)1==items[b].isselected&&(items[b].auth="r",items[b].para.css("border-color","rgb(255,0,0)"));$c("#custanet-loading").remove(),$c("#custanet-main-pannel").css("display","none"),i(ccns,!0),1==ctype&&($c("#custanet-main-pannel").draggable("option","cancel","#custanet-main-pannel").css({width:"100%",position:"fixed",border:"none",top:"initial",bottom:"0"}),$c("#custanet-write-msg-c,#custanet-write-save,#custanet-write-close").hide(),$c("#custanet-main-pannel-m").height(30).width(30).css("padding-top","5px"),$c("#custanet-write").bind("touchstart",function(){$c("#custanet-write-msg-c,#custanet-write-save,#custanet-write-close").show(),$("#custanet-friend-text").focus(),$c(this).hide()}).show(),$c("#custanet-write-save").bind("touchstart",function(){return constFlg=!0,g(!0),!1}),$c("#custanet-write-close").bind("touchstart",function(){$c("#custanet-write-msg-c,this,#custanet-write-save").hide(),$c("#custanet-write").show()}),$c("#custanet-main-pannel-m").bind("touchstart",function(){"-"==$c(this).text()?($c("#custanet-command").css("display","none"),$c(this).text("+")):($c("#custanet-command").css("display","block"),$c(this).text("-"))}))}function ctnE(){function a(){if(l++,l>3)clearInterval(g),clearInterval(n),$c("#custanet-loading").html("Custanet<br>Please<a href='"+debugStr+"' target='_blank'>Login</a>");else{$c.getJSON(debugStr+"/login?callback=?",{password:e,url:location.href},function(a){if("no"!=a){var b="",c="",d="",e=[];if($c("#custanet-div-name").html(a.name),$c.extend(defaultCss,iniC(a.css)),$c.data($c("#custanet-name-key").get(0),"ykey",a.key),null!=a.fst){for(var f=0,h=a.fst.length;h>f;f++)b=a.fst[f].split("#"),i.push({name:b[0],value:b[1]}),e.push(f);if(j.push({name:"All",value:e}),null!=a.gst)for(var f=0,l=a.gst.length;l>f;f++){b=a.gst[f].split("##"),d=b[0],b=b[1].split("#"),e=[];for(var n=0,o=b.length;o>n;n++)for(var p=0,q=i.length;q>p;p++)b[n]==i[p].value&&e.push(p);j.push({name:d,value:e})}b="";for(var f=0,h=i.length;h>f;f++)c+="<span><input type='checkbox' class='custanet-friend-send' value='"+f+"'>"+i[f].name+"</span>";$c("#custanet-spl-fri").append(c),b="<tr class='custanet-ppy-fg'><td class='custanet-col1'>&emsp;&emsp;Friend</td><td colspan=2>"+c+"</td></tr>",$c("#custanet-property-table").append(b),b="",c="";for(var f=0,h=j.length;h>f;f++)c+="<span><input type='checkbox' class='custanet-group-send' value='"+f+"'>"+j[f].name+"</span>";$c("#custanet-spl-gro").append(c),b="<tr class='custanet-ppy-fg'><td class='custanet-col1'>&emsp;&emsp;Group</td><td colspan=2>"+c+"</td></tr>",$c("#custanet-property-table").append(b)}else $c("span.custanet-ppy-pri-span").html("private");if(void 0!=a.t){var b="";$c("#custanet-tw-a").append('<span><input id="custanet-twa" type="checkbox">&thinsp;<img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png"/>'+a.t+"</span>"),$c("#custanet-tw-b").append('<span><input id="custanet-twb"  type="checkbox">&thinsp;<img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png"/>'+a.t+"</span>")}else $c("td.custanet-tw").parents("tr").remove();clearInterval(g),k=!0,m=a}})}}function b(){function a(){var a="",b=[{password:e},{url:location.href},{ba:!0}];$c("span.custanet-time:first").size()>0&&b.push({dt:$c("span.custanet-time:first").html()});
for(var d=0,f=b.length;f>d;d++)a=a+$c.param(b[d])+"&";return a=a.slice(0,a.length-1),$c.getJSON(debugStr+"/more?callback=?",a,function(a){a.c>0&&($c("#custanet-more-new").remove(),c=$c("<div id='custanet-more-new' style='padding:10px 0px;font-size:11pt;background-color:#FFF;text-align:center;'><span>more new "+a.c+" custanet</span></div>").bind("click",function(){custanet_get_func(!1)}),$c("#custanet-others-msgs").prepend($c(c)))}),!1}if(k){clearInterval(n),h=$c("#custanet-main-pannel").height(),w=$c("#custanet-main-pannel").width();{setInterval(a,6e4)}ctn()}else;}var d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";d=d.split("");for(var e="",f=0;10>f;f++)e+=d[Math.floor(Math.random()*d.length)];$c("#custanet_welcome_iframe").attr("src",debugStr+"/test?pw="+e);var g,i=[],j=[],k=!1,l=0;setTimeout(function(){g=setInterval(a,2e3)},1e3);var m,n=setInterval(b,500)}function ctnC(){$c("#custanet-div-name").html(cuser.nam),$c.data($c("#custanet-name-key").get(0),"ykey",cuser.key),$c.extend(defaultCss,cuser.css),ctwName="b";var a,b="";if(null!=cuser.fri){a="";for(var c in cuser.fri)void 0!=cuser.fri[c].id&&(b+="<div><input type='checkbox' class='custanet-friend-send' value='"+cuser.fri[c].id+"'>"+cuser.fri[c].nam+"</div>");$c("#custanet-spl-fri").append(b),b="<dt class='custanet-ppy-fg'>Friend</dt><dd class='custanet-ppy-fg'>"+b+"</dd>",$c("#custanet-property-table dt.custanet-ppy-tw").before(b+a)}else $c("span.custanet-ppy-pri-span").html("private");if(void 0!=cuser.tw){var a="";$c("#custanet-tw-a").append('<span><input id="custanet-twa" type="checkbox">&thinsp;<img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png"/>'+cuser.tw+"</span>"),$c("#custanet-tw-b").append('<span><input id="custanet-twb"  type="checkbox">&thinsp;<img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png"/>'+cuser.tw+"</span>")}else $c(".custanet-ppy-tw").remove();ctn()}Array.prototype.contains=function(a){for(var b in this)if(this.hasOwnProperty(b)&&this[b]===a)return!0;return!1};var custanetmenu=0,custanetfonttbl=0,custanetareatbl=0,custanetbordertbl=0,custanetprptbl=0,custanettagtbl=0,custanetothertbl=0,zPannel=1e4,zList=2e4,zTable=3e4,zDrag=4e4,pubc="#87cefa",pric="#f99",fric="#9f9",twc="#9AE4E8",browser,items=new Array,oitems=new Array,myCs={},CurlTag=new Array,ctype=0;$c(window).width()<=640&&(ctype=1);var constFlg=!1,debugStr;debugStr="https://custanets.appspot.com",$c("#custanet-friend-text").css("background-color",pubc),$c("body").css("position","initial");var getLargestZIndex=function(){var a=0,b=document.defaultView,c=function(c){for(var d=document.getElementsByTagName(c),e=d.length,f=0;e>f;f++){var g=d[f],h=g.style.zIndex;if(!h){var i=g.currentStyle||b.getComputedStyle(g,null);h=i?i.zIndex:0}h-=0,h>a&&(a=h)}};if(0==arguments.length)c("*");else for(var d=0;d<arguments.length;d++)c(arguments[d]);return a},baseZ=getLargestZIndex(),randomStr=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";a=a.split("");for(var b="",c=0;10>c;c++)b+=a[Math.floor(Math.random()*a.length)];return b},str="",custanet_genre={"0010":"PC","0020":"","0030":"","0040":"","0050":"","0060":"","0070":"","0080":"","0090":"","0100":"","0110":"","0120":"","0130":"","0140":"","0150":"","0160":"","0170":"","0180":"","0190":"","0200":"","0210":"","0220":"","0230":"","0240":""};for(var i in custanet_genre)str=str+"<div>&ensp;<span class='"+i+"'>"+custanet_genre[i]+"</span></div>";var checkCtag=function(a){var b=$c(a).find("span").attr("class");$c(a).hasClass("custanet-tag-active")?$c("span."+b).parent("div").removeClass("custanet-tag-active"):$c("span."+b).parent("div").addClass("custanet-tag-active"),CurlTag=[],$c("#custanet-tag-pp-s div.custanet-tag-active").each(function(){CurlTag.push($c(this).find("span").attr("class"))});for(var c in myCs)myCs[c].isselected&&(myCs[c].tag=CurlTag)};$c("#custanet-tag-s").append(str).find("div").click(function(){checkCtag(this)}),$c("#custanet-tag-pp-s").append(str).find("div").click(function(){checkCtag(this)}),$c("#custanet-select-tag").click(function(){"none"==$c("#custanet-tag-s").css("display")?($c("#custanet-tag-s").css("display","block"),$c(this).attr("value"," close ")):($c("#custanet-tag-s").css("display","none"),$c(this).attr("value","select tag"))}),browser=!$c.support.checkOn&&$c.support.checkClone?"chrome":$c.support.checkOn&&$c.support.htmlSerialize&&window.globalStorage?"Firefox":$c.support.checkOn&&$c.support.htmlSerialize&&!window.globalStorage?"Opera":!$c.support.htmlSerialize&&$c.support.scriptEval?"IE9":$c.support.opacity?"undefine":$c.support.style?"IE8":"undefined"!=typeof document.documentElement.style.maxHeight?"IE7":"IE6",function($c){var calcFloat={get:function(num){var num=num.toString();if(-1==num.indexOf("."))return[0,eval(num)];var nn=num.split("."),po=nn[1].length,st=nn.join(""),sign="";"-"==st.charAt(0)&&(st=st.substr(1),sign="-");for(var i=0;i<st.length;++i)"0"==st.charAt(0)&&(st=st.substr(1,st.length));return st=sign+st,[po,eval(st)]},getInt:function(num,figure){var d=Math.pow(10,figure),n=this.get(num),v1=eval("num * d"),v2=eval("n[1] * d");return this.get(v1)[1]==v2?v1:0==n[0]?v1:eval(v2+"/Math.pow(10,n[0])")},sum:function(v1,v2){var n1=this.get(v1),n2=this.get(v2),figure=n1[0]>n2[0]?n1[0]:n2[0];return v1=this.getInt(v1,figure),v2=this.getInt(v2,figure),eval("v1+v2")/Math.pow(10,figure)}};$c.extend({spin:{imageBasePath:debugStr+"/images/spin/",spinBtnImage:debugStr+"/images/spin/spin-button.png",spinUpImage:debugStr+"/images/spin/spin-up.png",spinDownImage:debugStr+"/images/spin/spin-down.png",interval:1,max:null,min:null,timeInterval:500,timeBlink:200,btnClass:null,btnCss:{cursor:"pointer",padding:0,margin:0,marginBottom:4,verticalAlign:"middle"},txtCss:{marginRight:0,paddingRight:0},lock:!1,decimal:null,beforeChange:null,changed:null,buttonUp:null,buttonDown:null}}),$c.fn.extend({spin:function(a){return this.each(function(){function b(a){var b=d.val(),f=b;if(c.decimal&&(b=b.replace(c.decimal,".")),!isNaN(b)&&(b=calcFloat.sum(b,a*c.interval),null!==c.min&&b<c.min&&(b=c.min),null!==c.max&&b>c.max&&(b=c.max),b!=d.val())){c.decimal&&(b=b.toString().replace(".",c.decimal));var h=$c.isFunction(c.beforeChange)?c.beforeChange.apply(d,[b,f]):!0;h!==!1&&(d.val(b),$c.isFunction(c.changed)&&c.changed.apply(d,[b]),d.change(),src=a>0?g:i,k.attr("src",src),c.timeBlink<c.timeInterval&&setTimeout(function(){k.attr("src",e)},c.timeBlink))}a>0?$c.isFunction(c.buttonUp)&&c.buttonUp.apply(d,[b]):$c.isFunction(c.buttonDown)&&c.buttonDown.apply(d,[b])}a=a||{};var c={};$c.each($c.spin,function(b,d){c[b]="undefined"!=typeof a[b]?a[b]:d});var d=$c(this),e=debugStr+"/images/spin/spin-button.png",f=new Image;f.src=e;var g=debugStr+"/images/spin/spin-up.png",h=new Image;h.src=g;var i=debugStr+"/images/spin/spin-down.png",j=new Image;j.src=i;var k=$c(document.createElement("img"));k.attr("src",e),c.btnClass&&k.addClass(c.btnClass),c.btnCss&&k.css(c.btnCss),c.txtCss&&d.css(c.txtCss),d.after(k),c.lock&&d.focus(function(){d.blur()}),k.mousedown(function(a){var d=a.pageY-k.offset().top,f=k.height()/2>d?1:-1;return function(){b(f);var a=setTimeout(arguments.callee,c.timeInterval);$c(document).one("mouseup",function(){clearTimeout(a),k.attr("src",e)})}(),!1})})}})}($c);var fonts={serif:{alt:"serif",url:""},"sans-serif":{alt:"sans-serif",url:""},cursive:{alt:"cursive",url:""},fantasy:{alt:"fantasy",url:""},monospace:{alt:"monospace",url:""},Verdana:{alt:"Verdana",url:""},Arial:{alt:"Arial",url:""}};$c.fn.custanetSpinSlider=function(a,b,c,d,e){var f=$c(this).attr("id");f=f.replace("custanet-",""),f=f.replace("-spin",""),$c(this).attr("value",parseInt(a[f])).spin({max:b,min:c,interval:d,changed:function(b){a[f]=b+e,$c("#custanet-"+f+"-slider").slider("option","value",b),cssUpdates(a,f)}}).keyup(function(){""!=this.value&&isNaN(this.value)&&(this.value=c),parseInt(this.value)>b&&(this.value=b),parseInt(this.value)<c&&(this.value=c),$c("#custanet-"+f+"-slider").slider("option","value",this.value),a[f]=this.value+e,cssUpdates(a,f)}),-1==f.indexOf("shadow")&&$c("#custanet-"+f+"-slider").slider({max:b,min:c,value:parseInt(a[f]),slide:function(b,c){a[f]=c.value+e,$c("#custanet-"+f+"-spin").val(c.value),cssUpdates(a,f)}})},$c.fn.farbtastic=function(a){return $c.farbtastic(this,a),this},$c.farbtastic=function(a,b){var a=$c(a).get(0);return a.farbtastic||(a.farbtastic=new $c._farbtastic(a,b))},$c._farbtastic=function(a,b){var c=this;$c(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var d=$c(".farbtastic",a);c.wheel=$c(".wheel",a).get(0),c.radius=42,c.square=50,c.width=97,navigator.appVersion.match(/MSIE [0-6]\./)&&$c("*",d).each(function(){if("none"!=this.currentStyle.backgroundImage){var a=this.currentStyle.backgroundImage;a=this.currentStyle.backgroundImage.substring(5,a.length-2),$c(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=crop,src='"+a+"')"})}}),c.linkTo=function(a){return"object"==typeof c.callback&&$c(c.callback).unbind("keyup",c.updateValue),c.color=null,"function"==typeof a?c.callback=a:("object"==typeof a||"string"==typeof a)&&(c.callback=$c(a),c.callback.bind("keyup",c.updateValue),c.callback.get(0).value&&c.setColor(c.callback.get(0).value)),this},c.updateValue=function(){this.value&&this.value!=c.color&&c.setColor(this.value)},c.setColor=function(a){var b=c.unpack(a);return c.color!=a&&b&&(c.color=a,c.rgb=b,c.hsl=c.RGBToHSL(c.rgb),c.updateDisplay()),this},c.setHSL=function(a){return c.hsl=a,c.rgb=c.HSLToRGB(a),c.color=c.pack(c.rgb),c.updateDisplay(),this},c.widgetCoords=function(a){var b,d,e=a.target||a.srcElement,f=c.wheel;if("undefined"!=typeof a.offsetX){for(var g={x:a.offsetX,y:a.offsetY},h=e;h;)h.mouseX=g.x,h.mouseY=g.y,g.x+=h.offsetLeft,g.y+=h.offsetTop,h=h.offsetParent;for(var h=f,i={x:0,y:0};h;){if("undefined"!=typeof h.mouseX){b=h.mouseX-i.x,d=h.mouseY-i.y;break}i.x+=h.offsetLeft,i.y+=h.offsetTop,h=h.offsetParent}for(h=e;h;)h.mouseX=void 0,h.mouseY=void 0,h=h.offsetParent}else{var g=c.absolutePosition(f);b=(a.pageX||0*(a.clientX+$c("html").get(0).scrollLeft))-g.x,d=(a.pageY||0*(a.clientY+$c("html").get(0).scrollTop))-g.y}return{x:b-c.width/2,y:d-c.width/2}},c.mousedown=function(a){document.dragging||($c(document).bind("mousemove",c.mousemove).bind("mouseup",c.mouseup),document.dragging=!0);var b=c.widgetCoords(a);return c.circleDrag=2*Math.max(Math.abs(b.x),Math.abs(b.y))>c.square,c.mousemove(a),!1},c.mousemove=function(a){var b=c.widgetCoords(a);if(c.circleDrag){var d=Math.atan2(b.x,-b.y)/6.28;0>d&&(d+=1),c.setHSL([d,c.hsl[1],c.hsl[2]])}else{var e=Math.max(0,Math.min(1,-(b.x/c.square)+.5)),f=Math.max(0,Math.min(1,-(b.y/c.square)+.5));c.setHSL([c.hsl[0],e,f])}return!1},c.mouseup=function(){$c(document).unbind("mousemove",c.mousemove),$c(document).unbind("mouseup",c.mouseup),document.dragging=!1},c.updateDisplay=function(){var a=6.28*c.hsl[0];$c(".h-marker",d).css({left:Math.round(Math.sin(a)*c.radius+c.width/2)+"px",top:Math.round(-Math.cos(a)*c.radius+c.width/2)+"px"}),$c(".sl-marker",d).css({left:Math.round(c.square*(.5-c.hsl[1])+c.width/2)+"px",top:Math.round(c.square*(.5-c.hsl[2])+c.width/2)+"px"}),$c(".color",d).css("backgroundColor",c.pack(c.HSLToRGB([c.hsl[0],1,.5]))),"object"==typeof c.callback?($c(c.callback).css({backgroundColor:c.color,color:c.hsl[2]>.5?"#000":"#fff"}),$c(c.callback).each(function(){this.value&&this.value!=c.color&&(this.value=c.color)})):"function"==typeof c.callback&&c.callback.call(c,c.color);var e=b+"",f=c.color+"";hex2RgbHsv(e,f);var g;for(var h in myCs)if(myCs[h].isselected)if(-1==e.indexOf("shadow",0)){g=hexUnpack(f);var i=window.navigator.appVersion.toLowerCase();g=i.indexOf("msie 6.0")>-1||i.indexOf("msie 7.0")>-1||i.indexOf("msie 8.0")>-1?"rgb("+255*g[0]+","+255*g[1]+","+255*g[2]+")":-1!=e.indexOf("border",0)?"rgba("+255*g[0]+","+255*g[1]+","+255*g[2]+","+myCs[h].currentcss["border-opacity"]/100+")":-1!=e.indexOf("background",0)?"rgba("+255*g[0]+","+255*g[1]+","+255*g[2]+","+myCs[h].currentcss["background-opacity"]/100+")":"rgba("+255*g[0]+","+255*g[1]+","+255*g[2]+","+myCs[h].currentcss["font-opacity"]/100+")",myCs[h].para.children("textarea.custanet-tbFore").css(e.replace("#custanet-",""),g),myCs[h].currentcss[e.replace("#custanet-","")]=f}else-1!=e.indexOf("text-shadow",0)?(g=f+" "+myCs[h].currentcss[e.replace("#custanet-","")+"-positonx"]+" "+myCs[h].currentcss[e.replace("#custanet-","")+"-positony"]+" "+myCs[h].currentcss[e.replace("#custanet-","")+"-blur"],myCs[h].para.children("textarea.custanet-tbFore").css(e.replace("#custanet-",""),g),myCs[h].currentcss[e.replace("#custanet-","")]=f):-1!=e.indexOf("box-shadow",0)&&(g=f+" "+myCs[h].currentcss[e.replace("#custanet-","")+"-positonx"]+" "+myCs[h].currentcss[e.replace("#custanet-","")+"-positony"]+" "+myCs[h].currentcss[e.replace("#custanet-","")+"-blur"],myCs[h].para.children("textarea.custanet-tbFore").css("-moz-box-shadow",g),myCs[h].para.children("textarea.custanet-tbFore").css("-webkit-box-shadow",g),myCs[h].currentcss[e.replace("#custanet-","")]=f)},c.absolutePosition=function(a){var b={x:a.offsetLeft,y:a.offsetTop};if(a.offsetParent){var d=c.absolutePosition(a.offsetParent);b.x+=d.x,b.y+=d.y}return b},c.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]),d=Math.round(255*a[2]);return"#"+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)+(16>d?"0":"")+d.toString(16)},c.unpack=function(a){if(void 0!=a){if(7==a.length)return[parseInt("0x"+a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]}},c.HSLToRGB=function(a){var b,c,d=a[0],e=a[1],f=a[2];return c=.5>=f?f*(e+1):f+e-f*e,b=2*f-c,[this.hueToRGB(b,c,d+.33333),this.hueToRGB(b,c,d),this.hueToRGB(b,c,d-.33333)]},c.hueToRGB=function(a,b,c){return c=0>c?c+1:c>1?c-1:c,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a},c.RGBToHSL=function(a){var b,c,d,e,f,g,h=a[0],i=a[1],j=a[2];return b=Math.min(h,Math.min(i,j)),c=Math.max(h,Math.max(i,j)),d=c-b,g=(b+c)/2,f=0,g>0&&1>g&&(f=d/(.5>g?2*g:2-2*g)),e=0,d>0&&(c==h&&c!=i&&(e+=(i-j)/d),c==i&&c!=j&&(e+=2+(j-h)/d),c==j&&c!=h&&(e+=4+(h-i)/d),e/=6),[e,f,g]},$c("*",d).mousedown(c.mousedown),c.setColor("#ffaaff"),b&&c.linkTo(b)};var iniC=function(a){for(var b=a.split("!"),c=new Array("font-family","color","font-opacity","font-size","font-style","font-weight","text-decoration","letter-spacing","word-spacing","line-height","text-align","text-shadow-positonx","text-shadow-positony","text-shadow-blur","text-shadow","text-shadow-flg","top","left","depth","height","width","background-color","background-opacity","padding","border-radius","box-shadow","box-shadow-flg","box-shadow-positonx","box-shadow-positony","box-shadow-blur","border-style","border-color","border-opacity","border-width","bheight","bwidth"),d={},e=0,f=c.length;f>e;e++)d[c[e]]=b[e];return d},defaultCss={},h,w;ctnC()});